---
// Componente de Certificaciones y Logros

// Importar certificaciones
import jsCertification from '../assets/certificaciones/JavaScript-CoderHouse.png';
import csharpCertification from '../assets/certificaciones/poo-csharp.jpg';
import wpCertification from '../assets/certificaciones/WordPress-WooCommerce.jpg';
import britishSchoolCert from '../assets/certificaciones/britishschool-english-2.pdf';

// Datos de certificaciones
const certifications = [
  {
    title: "JavaScript - Desarrollo Web",
    issuer: "CoderHouse",
    date: "2024",
    type: "image",
    file: jsCertification.src,
    icon: "üíª",
    description: "Certificaci√≥n completa en JavaScript moderno"
  },
  {
    title: "Programaci√≥n Orientada a Objetos C#",
    issuer: "Curso Especializado",
    date: "2024",
    type: "image", 
    file: csharpCertification.src,
    icon: "üü£",
    description: "POO avanzada con C# y .NET"
  },
  {
    title: "WordPress & WooCommerce",
    issuer: "Desarrollo Web",
    date: "2024",
    type: "image",
    file: wpCertification.src,
    icon: "üåê",
    description: "Desarrollo completo con WordPress y WooCommerce"
  },

  {
    title: "English II - Intensive Course",
    issuer: "British School",
    date: "2023",
    type: "pdf",
    file: britishSchoolCert,
    icon: "üìö",
    description: "Certificacion de nivel intermedio de ingl√©s"
  }
];

// Logros adicionales
const achievements = [
  {
    title: "Automatizaci√≥n de ventas con Python",
    issuer: "Aplicaci√≥n de escritorio",
    date: "2024",
    icon: "üêç",
    description: "Software de ventas para panader√≠a"
  },
  {
    title: "Autoclinic ‚Ä¢ Software de gesti√≥n para talleres",
    issuer: "Seminario acad√©mico",
    date: "2025",
    icon: "üîß",
    description: "sistema de gesti√≥n para talleres mec√°nicos."
  },
  {
    title: "Landing GoGo Travel (WordPress + Elementor)",
    issuer: "Proyecto freelance",
    date: "2023",
    icon: "üß≠",
    description: "P√°gina de aterrizaje para agencia de viajes"
  }
];
---

<section id="certifications" class="py-20 bg-gray-50 dark:bg-gray-800">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Certificaciones -->
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
        Mis <span class="text-blue-600">Certificaciones</span>
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        Formaci√≥n continua y certificaciones que respaldan mi experiencia profesional
      </p>
    </div>

    <!-- Grid de certificaciones -->
    <div class="grid md:grid-cols-2 lg:grid-cols-2 gap-8 mb-20">
      {certifications.map((cert) => (
        <div class="bg-white dark:bg-gray-900 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-700 group">
          <!-- Encabezado de certificaci√≥n -->
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center">
              <span class="text-3xl mr-3">{cert.icon}</span>
              <div>
                <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-1">{cert.title}</h3>
                <p class="text-blue-600 dark:text-blue-400 font-medium text-sm">{cert.issuer}</p>
              </div>
            </div>
            <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">{cert.date}</span>
          </div>

          <!-- Descripci√≥n -->
          <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">{cert.description}</p>

          <!-- Preview de certificaci√≥n -->
          <div class="relative overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800 mb-4">
            {cert.type === 'image' && (
              <img 
                src={cert.file} 
                alt={cert.title}
                class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300 cursor-pointer open-cert"
                data-file={cert.file}
                data-title={cert.title}
                data-type="image"
              />
            )}

            {cert.type === 'pdf' && (
              <div 
                class="w-full h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors cursor-pointer open-cert"
                data-file={cert.file}
                data-title={cert.title}
                data-type="pdf"
              >
                <svg class="w-16 h-16 mb-2" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                <span class="text-sm font-medium">Ver PDF</span>
              </div>
            )}
          </div>

          <!-- Bot√≥n de acci√≥n -->
          <button 
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center open-cert"
            data-file={cert.file}
            data-title={cert.title}
            data-type={cert.type}
          >
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
            </svg>
            Ver Certificaci√≥n
          </button>
        </div>
      ))}
    </div>

    <!-- Proyectos y Logros -->
    <div class="text-center mb-12">
      <h3 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
        Proyectos <span class="text-blue-600">Destacados</span>
      </h3>
      <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        Algunos de los proyectos m√°s importantes que he desarrollado y estoy desarrollando
      </p>
    </div>

    <div class="grid md:grid-cols-3 gap-6">
      {achievements.map((achievement) => (
        <div class="bg-white dark:bg-gray-900 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow border border-gray-200 dark:border-gray-700">
          <div class="text-4xl mb-4 text-center">{achievement.icon}</div>
          <h4 class="font-semibold text-gray-900 dark:text-white mb-2 text-center">{achievement.title}</h4>
          <p class="text-blue-600 dark:text-blue-400 font-medium mb-2 text-center text-sm">{achievement.issuer}</p>
          <p class="text-sm text-gray-600 dark:text-gray-400 text-center mb-3">{achievement.description}</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 text-center">{achievement.date}</p>
        </div>
      ))}
    </div>
  </div>

  <!-- Idiomas -->
  <div class="mt-16 text-center">
    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
      Idiomas
    </h3>
    <div class="flex flex-col sm:flex-row items-center justify-center gap-6 text-gray-600 dark:text-gray-300">
      <div class="bg-gray-50 dark:bg-gray-800 rounded-xl px-6 py-4 shadow-sm">
        <p class="text-lg font-semibold text-gray-900 dark:text-white">Espa√±ol</p>
        <p class="text-sm">Nativo</p>
      </div>
      <div class="bg-gray-50 dark:bg-gray-800 rounded-xl px-6 py-4 shadow-sm">
        <p class="text-lg font-semibold text-gray-900 dark:text-white">Ingl√©s</p>
        <p class="text-sm">Nivel b√°sico / intermedio</p>
      </div>
    </div>
  </div>
</section>

<!-- Modal para ver certificaciones -->
<div id="certModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
  <div class="bg-white dark:bg-gray-900 rounded-lg max-w-4xl max-h-[90vh] w-full overflow-hidden">
    <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
      <h3 id="modalTitle" class="text-lg font-semibold text-gray-900 dark:text-white"></h3>
      <button id="closeModalBtn" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div id="modalContent" class="p-4 overflow-auto max-h-[calc(90vh-80px)]">
      <!-- El contenido se insertar√° aqu√≠ din√°micamente -->
    </div>
  </div>
</div>

<script>
  /* @ts-nocheck */
  document.addEventListener('DOMContentLoaded', () => {
    // Funci√≥n para abrir modal
  /**
   * Abre el modal con contenido din√°mico
   * @param {string} file
   * @param {string} title
   * @param {'image'|'pdf'} type
   */
  function openModal(file: string, title: string, type: 'image' | 'pdf') {
      const modal = document.getElementById('certModal');
      const modalTitle = document.getElementById('modalTitle');
      const modalContent = document.getElementById('modalContent');

      if (!modal || !modalTitle || !modalContent) return;

      modalTitle.textContent = title;

      if (type === 'image') {
        modalContent.innerHTML = `<img src="${file}" alt="${title}" class="w-full h-auto rounded-lg">`;
      } else if (type === 'pdf') {
        modalContent.innerHTML = `
          <div class="w-full">
            <div class="mb-3 flex items-center justify-between">
              <p class="text-gray-600 dark:text-gray-400 text-sm">Vista previa del PDF</p>
              <a href="${file}" target="_blank" rel="noopener" class="inline-flex items-center px-3 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-md text-sm hover:bg-gray-300 dark:hover:bg-gray-600">
                Abrir en pesta√±a
              </a>
            </div>
            <div class="rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-white">
              <iframe src="${file}#toolbar=1&navpanes=0&scrollbar=1" class="w-full h-[70vh] bg-white" title="${title}"></iframe>
            </div>
            <div class="mt-3 text-center">
              <a href="${file}" download class="inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                Descargar PDF
              </a>
            </div>
          </div>
        `;
      }

      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function closeModal() {
      const modal = document.getElementById('certModal');
      if (modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }
    }

    // Configurar eventos
    const modal = document.getElementById('certModal');
    if (modal) {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }

    const closeBtn = document.getElementById('closeModalBtn');
    if (closeBtn) closeBtn.addEventListener('click', closeModal);

    const triggers = document.querySelectorAll('.open-cert');
    triggers.forEach((el) => {
      el.addEventListener('click', () => {
        const file = el.getAttribute('data-file') || '';
        const title = el.getAttribute('data-title') || '';
        const type = (el.getAttribute('data-type') || 'image') as 'image' | 'pdf';
        openModal(file, title, type);
      });
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
  });
</script>